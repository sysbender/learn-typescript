 
# üìò Dynamic Module Imports with `import.meta.glob` in Vite

Vite provides a powerful function called `import.meta.glob` that allows you to dynamically import multiple modules based on file patterns. This guide walks through its usage, behavior, and configuration options.

---

## üõ† Step 1: Setup Project Structure

Create a folder named `10` inside `src/` and add three JavaScript modules:

```bash
src/10/
‚îú‚îÄ‚îÄ a.js
‚îú‚îÄ‚îÄ b.js
‚îî‚îÄ‚îÄ c.js
```

Each module should contain a simple log statement:

```js
// a.js
console.log('Module A loaded');
export default 2;

// b.js
console.log('Module B loaded');
export const name = 'John';

// c.js
console.log('Module C loaded');
```

---

## üìÑ Step 2: Use `import.meta.glob`

In `main.js`, use the glob function to import all `.js` files in the folder:

```js
const modules = import.meta.glob('./10/*.js');
console.log(modules);
```

### üîç What You Get

- An object where each key is a file path.
- Each value is a function that returns a Promise to dynamically import the module.

---

## üîÅ Step 3: Dynamically Load Modules

You can iterate and load each module:

```js
Object.values(modules).forEach(loader => {
  loader().then(data => {
    console.log(data);
  });
});
```

Each module is fetched and executed, and its exports are logged.

---

## üñ± Step 4: Load Modules on Event

To defer loading until a user action:

```js
document.addEventListener('click', () => {
  Object.values(modules).forEach(loader => {
    loader().then(data => {
      console.log(data);
    });
  });
});
```

Modules are only loaded after a click event.

---

## ‚öôÔ∏è Step 5: Use `eager` Option

You can force modules to load immediately:

```js
const modules = import.meta.glob('./10/*.js', { eager: true });
console.log(modules);
```

### üîç Behavior Change

- Modules are loaded on page load.
- The returned object contains **module exports**, not loader functions.

### ‚ùó Warning

If you try to call the values as functions:

```js
modules['./10/a.js'](); // ‚ùå Error: not a function
```

You‚Äôll get an error because the values are no longer functions.

---

## üß™ Step 6: Inspect Transformed Code

Vite transforms `import.meta.glob` into multiple import statements:

```js
import * as a from './10/a.js';
import * as b from './10/b.js';
import * as c from './10/c.js';

const modules = {
  './10/a.js': a,
  './10/b.js': b,
  './10/c.js': c
};
```

This transformation is visible in plugin inspectors and browser dev tools.

---

## ‚úÖ Summary

| Feature                | `import.meta.glob`        | `import.meta.glob` with `eager: true` |
|------------------------|---------------------------|----------------------------------------|
| Returns                | Functions (Promises)       | Module exports                         |
| Loads on               | Demand (e.g. click)        | Immediately on page load               |
| Use case               | Lazy loading, conditional | Preloading, SSR                        |
| Error if misused       | ‚ùå Calling exports as functions | ‚ùå Expecting functions from eager mode |

---

## üìö Bonus

Use glob patterns like:

```js
import.meta.glob('./modules/**/*.js');
```

This matches nested files and supports flexible module loading.
 